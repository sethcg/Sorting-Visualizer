INCLUDE(FetchContent)

# FETCH IMGUI (VCPKG INSTALL WAS NOT WORKING)
FetchContent_Declare(imgui
    GIT_REPOSITORY https://github.com/ocornut/imgui.git
    GIT_TAG v1.92.3-docking
)
FetchContent_MakeAvailable(imgui)

# GET ALL RELEVANT SOURCE FILES
SET(SOURCES 
    ${imgui_SOURCE_DIR}/imgui.cpp
    ${imgui_SOURCE_DIR}/imgui_draw.cpp
    ${imgui_SOURCE_DIR}/imgui_tables.cpp
    ${imgui_SOURCE_DIR}/imgui_widgets.cpp
    ${imgui_SOURCE_DIR}/backends/imgui_impl_sdl3.cpp
    ${imgui_SOURCE_DIR}/backends/imgui_impl_sdlrenderer3.cpp
)

ADD_LIBRARY(imgui STATIC ${SOURCES})

TARGET_INCLUDE_DIRECTORIES(imgui PUBLIC ${imgui_SOURCE_DIR} ${imgui_SOURCE_DIR}/backends)

# PROVIDE NECESSARY SDL3 LIBRARY
TARGET_LINK_LIBRARIES(imgui PUBLIC SDL3::SDL3)

# FETCH GOOGLE TEST (VCPKG INSTALL WAS NOT WORKING)
FetchContent_Declare(googletest
    GIT_REPOSITORY https://github.com/google/googletest.git
    GIT_TAG v1.17.0
)
FetchContent_MakeAvailable(googletest)

# FOR WINDOWS: PREVENT OVERRIDING PARENT PROJECT COMPILER/LINKER SETTINGS
SET(gtest_force_shared_crt ON CACHE BOOL "" FORCE)

ADD_LIBRARY(googletest INTERFACE IMPORTED)

TARGET_LINK_LIBRARIES(googletest INTERFACE gtest_main)